(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{mpk1:function(r,e,o){"use strict";o.r(e),o.d(e,"RoomModule",function(){return J});var t=o("3Pt+"),n=o("JIr8"),c=o("z6cu"),i=o("fXoL"),a=o("0fCc"),m=o("gbi4"),s=o("tyNb"),b=o("kmnG"),l=o("qFsG"),u=o("ofXK"),p=o("bTqV");function f(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}function d(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}let y=(()=>{class r{constructor(r,e,o,n){this.roomService=r,this.commonService=e,this.router=o,this.route=n,this.roomJoinFormGroup=new t.f({code:new t.d(null,t.q.required),name:new t.d(null,t.q.required)})}onRoomJoinClick(){const{code:r,name:e}=this.roomJoinFormGroup.value;this.roomService.joinRoom(r,e).pipe(Object(n.a)(r=>(this.commonService.openAlertModal({message:r.error.message}),Object(c.a)(r)))).subscribe(({room:r,player:e})=>{this.roomService.room.next(r),this.roomService.player.next(e),this.router.navigate(["../wait"],{relativeTo:this.route})})}}return r.\u0275fac=function(e){return new(e||r)(i.Ob(a.a),i.Ob(m.a),i.Ob(s.c),i.Ob(s.a))},r.\u0275cmp=i.Ib({type:r,selectors:[["room-join"]],decls:14,vars:4,consts:[[1,"container",3,"formGroup"],["appearance","standard",1,"w-100"],["matInput","","formControlName","code",3,"input"],["codeInput",""],[4,"ngIf"],["matInput","","formControlName","name"],["mat-raised-button","","color","primary",1,"w-100","mt-4",3,"disabled","click"]],template:function(r,e){if(1&r){const r=i.Vb();i.Ub(0,"div",0),i.Ub(1,"mat-form-field",1),i.Ub(2,"mat-label"),i.yc(3,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u043a\u043e\u043c\u043d\u0430\u0442\u044b"),i.Tb(),i.Ub(4,"input",2,3),i.bc("input",function(){i.rc(r);const e=i.pc(5);return e.value=e.value.toUpperCase()}),i.Tb(),i.xc(6,f,2,0,"mat-error",4),i.Tb(),i.Ub(7,"mat-form-field",1),i.Ub(8,"mat-label"),i.yc(9,"\u041a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442?"),i.Tb(),i.Pb(10,"input",5),i.xc(11,d,2,0,"mat-error",4),i.Tb(),i.Ub(12,"button",6),i.bc("click",function(){return e.onRoomJoinClick()}),i.yc(13," \u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f "),i.Tb(),i.Tb()}2&r&&(i.kc("formGroup",e.roomJoinFormGroup),i.Db(6),i.kc("ngIf",e.roomJoinFormGroup.controls.code.hasError("required")),i.Db(5),i.kc("ngIf",e.roomJoinFormGroup.controls.name.hasError("required")),i.Db(1),i.kc("disabled",!e.roomJoinFormGroup.valid))},directives:[t.m,t.g,b.c,b.f,l.b,t.c,t.l,t.e,u.k,p.b,b.b],styles:[""]}),r})();var h=function(r){return r[r.PENDING=0]="PENDING",r[r.ACTIVE=1]="ACTIVE",r[r.CANCELED=2]="CANCELED",r}({}),g=o("HDdC"),O=o("D0XW"),v=o("Y7HM");function C(r){const{subscriber:e,counter:o,period:t}=r;e.next(o),this.schedule({subscriber:e,counter:o+1,period:t},t)}var P=o("pLZG"),T=o("eIep"),M=o("NFeN");function U(r,e){if(1&r&&(i.Ub(0,"div",6),i.Ub(1,"mat-icon"),i.yc(2,"person"),i.Tb(),i.Ub(3,"span",7),i.yc(4),i.Tb(),i.Tb()),2&r){const r=e.$implicit;i.Db(4),i.zc(r.name)}}let k=(()=>{class r{constructor(r,e,o){this.roomService=r,this.commonService=e,this.router=o}ngOnInit(){this.roomService.room.pipe(Object(P.a)(r=>null!=r||null!=r)).subscribe(r=>{this.room=r,r.roomStatus==h.ACTIVE&&this.router.navigate(["game"])}),this.player=this.roomService.player.getValue(),this.room?this.intervalSub=function(r=0,e=O.a){return(!Object(v.a)(r)||r<0)&&(r=0),e&&"function"==typeof e.schedule||(e=O.a),new g.a(o=>(o.add(e.schedule(C,r,{subscriber:o,counter:0,period:r})),o))}(2e3).pipe(Object(T.a)(()=>this.roomService.waitRoom(this.room.code,this.player.name)),Object(n.a)(r=>(this.commonService.openAlertModal({message:r.error.message}),this.router.navigate(["room"]),Object(c.a)(r)))).subscribe(r=>{this.roomService.room.next(r)}):this.router.navigate(["room"])}onGameStart(){this.roomService.startRoom(this.room.code).subscribe(r=>console.log(r))}ngOnDestroy(){var r;null===(r=this.intervalSub)||void 0===r||r.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(i.Ob(a.a),i.Ob(m.a),i.Ob(s.c))},r.\u0275cmp=i.Ib({type:r,selectors:[["room-wait"]],decls:14,vars:5,consts:[[1,"container"],[1,"room-code"],[1,"players-list"],[1,"number-of-players"],["class","player-list-item",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"w-100","mt-4",3,"disabled","click"],[1,"player-list-item"],[1,"name"]],template:function(r,e){1&r&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"h3"),i.yc(3,"\u041a\u043e\u0434 \u043a\u043e\u043c\u043d\u0430\u0442\u044b"),i.Tb(),i.Ub(4,"h2"),i.yc(5),i.Tb(),i.Tb(),i.Ub(6,"div",2),i.Ub(7,"h4"),i.yc(8,"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"),i.Tb(),i.Ub(9,"span",3),i.yc(10),i.Tb(),i.xc(11,U,5,1,"div",4),i.Tb(),i.Ub(12,"button",5),i.bc("click",function(){return e.onGameStart()}),i.yc(13," \u041d\u0410\u0427\u0410\u0422\u042c \u0418\u0413\u0420\u0423 "),i.Tb(),i.Tb()),2&r&&(i.Db(5),i.zc(null==e.room?null:e.room.code),i.Db(5),i.Bc("",null==e.room?null:e.room.players.length,"/",null==e.room?null:e.room.numberOfPlayers,""),i.Db(1),i.kc("ngForOf",null==e.room?null:e.room.players),i.Db(1),i.kc("disabled",!(null!=e.player&&e.player.isRoomCreator)||e.room.numberOfPlayers>e.room.players.length))},directives:[u.j,p.b,M.a],styles:[".container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .room-code[_ngcontent-%COMP%]{padding-top:35px}.container[_ngcontent-%COMP%]   .room-code[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:31px;opacity:.75}.container[_ngcontent-%COMP%]   .room-code[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:39px;font-weight:700}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]{margin-top:35px}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:25px;font-weight:700}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   span.number-of-players[_ngcontent-%COMP%]{font-size:25px;margin-bottom:30px;display:inline-block}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .player-list-item[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .player-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:12px;background-color:#fff;box-sizing:initial;border-radius:50%;margin-right:10px}.container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .player-list-item[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{font-size:18px;font-weight:700}"]}),r})();const w=function(){return["join"]},x=function(){return["create"]};function I(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}function G(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}function _(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 4"),i.Tb())}function D(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}function S(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 1"),i.Tb())}function q(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),i.Tb())}function E(r,e){1&r&&(i.Ub(0,"mat-error"),i.yc(1,"\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c"),i.Tb())}const j=[{path:"",component:(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=i.Ib({type:r,selectors:[["room-start"]],decls:5,vars:4,consts:[[1,"container","d-flex","flex-column","justify-content-center"],["mat-raised-button","","color","primary",1,"mb-3",3,"routerLink"],["mat-raised-button","","color","secondary",3,"routerLink"]],template:function(r,e){1&r&&(i.Ub(0,"div",0),i.Ub(1,"a",1),i.yc(2,"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f"),i.Tb(),i.Ub(3,"a",2),i.yc(4,"\u0421\u041e\u0417\u0414\u0410\u0422\u042c \u041a\u041e\u041c\u041d\u0410\u0422\u0423"),i.Tb(),i.Tb()),2&r&&(i.Db(1),i.kc("routerLink",i.lc(2,w)),i.Db(2),i.kc("routerLink",i.lc(3,x)))},directives:[p.a,s.d],styles:[""]}),r})(),pathMatch:"full"},{path:"create",component:(()=>{class r{constructor(r,e,o,n){this.roomService=r,this.commonService=e,this.router=o,this.route=n,this.formGroup=new t.f({name:new t.d("",t.q.required),numberOfPlayers:new t.d(6,[t.q.required,t.q.min(4)]),numberOfMafia:new t.d(2,[t.q.required,t.q.min(1)]),numberOfPolices:new t.d(1,[t.q.required,t.q.min(0)])})}onRoomCreateClick(){const{name:r,numberOfPlayers:e,numberOfMafia:o,numberOfPolices:t}=this.formGroup.value;o>e||t>e||o+t>e?this.commonService.openAlertModal({message:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0444\u0438\u0438 \u0438 \u043a\u043e\u043c\u043c\u0438\u0441\u0441\u0430\u0440\u043e\u0432 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432"}):this.roomService.createRoom(r,e,o,t).pipe(Object(n.a)(r=>(this.commonService.openAlertModal({message:r.error.message}),Object(c.a)(r)))).subscribe(({room:r,player:e})=>{this.roomService.room.next(r),this.roomService.player.next(e),this.router.navigate(["../wait"],{relativeTo:this.route})})}}return r.\u0275fac=function(e){return new(e||r)(i.Ob(a.a),i.Ob(m.a),i.Ob(s.c),i.Ob(s.a))},r.\u0275cmp=i.Ib({type:r,selectors:[["room-create"]],decls:26,vars:9,consts:[[1,"container",3,"formGroup"],["appearance","standard",1,"w-100"],["matInput","","placeholder","Davai","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","9","type","number","formControlName","numberOfPlayers"],["matInput","","placeholder","2","type","number","formControlName","numberOfMafia"],["matInput","","placeholder","1","type","number","formControlName","numberOfPolices"],["mat-raised-button","","color","primary",1,"w-100","mt-4",3,"disabled","click"]],template:function(r,e){1&r&&(i.Ub(0,"div",0),i.Ub(1,"mat-form-field",1),i.Ub(2,"mat-label"),i.yc(3,"\u041a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442?"),i.Tb(),i.Pb(4,"input",2),i.xc(5,I,2,0,"mat-error",3),i.Tb(),i.Ub(6,"mat-form-field",1),i.Ub(7,"mat-label"),i.yc(8,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a"),i.Tb(),i.Pb(9,"input",4),i.xc(10,G,2,0,"mat-error",3),i.xc(11,_,2,0,"mat-error",3),i.Tb(),i.Ub(12,"mat-form-field",1),i.Ub(13,"mat-label"),i.yc(14,"\u041c\u0430\u0444\u0438\u044f"),i.Tb(),i.Pb(15,"input",5),i.xc(16,D,2,0,"mat-error",3),i.xc(17,S,2,0,"mat-error",3),i.Tb(),i.Ub(18,"mat-form-field",1),i.Ub(19,"mat-label"),i.yc(20,"\u041a\u043e\u043c\u0438\u0441\u0441\u0430\u0440"),i.Tb(),i.Pb(21,"input",6),i.xc(22,q,2,0,"mat-error",3),i.xc(23,E,2,0,"mat-error",3),i.Tb(),i.Ub(24,"button",7),i.bc("click",function(){return e.onRoomCreateClick()}),i.yc(25," \u0421\u041e\u0417\u0414\u0410\u0422\u042c "),i.Tb(),i.Tb()),2&r&&(i.kc("formGroup",e.formGroup),i.Db(5),i.kc("ngIf",e.formGroup.controls.name.hasError("required")),i.Db(5),i.kc("ngIf",e.formGroup.controls.numberOfPlayers.hasError("required")),i.Db(1),i.kc("ngIf",e.formGroup.controls.numberOfPlayers.hasError("min")),i.Db(5),i.kc("ngIf",e.formGroup.controls.numberOfMafia.hasError("required")),i.Db(1),i.kc("ngIf",e.formGroup.controls.numberOfMafia.hasError("min")),i.Db(5),i.kc("ngIf",e.formGroup.controls.numberOfPolices.hasError("required")),i.Db(1),i.kc("ngIf",e.formGroup.controls.numberOfPolices.hasError("min")),i.Db(1),i.kc("disabled",!e.formGroup.valid))},directives:[t.m,t.g,b.c,b.f,l.b,t.c,t.l,t.e,u.k,t.o,p.b,b.b],styles:[""]}),r})()},{path:"join",component:y},{path:"wait",component:k}];let N=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.Mb({type:r}),r.\u0275inj=i.Lb({imports:[[s.e.forChild(j)],s.e]}),r})();var F=o("PCNd");let J=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.Mb({type:r}),r.\u0275inj=i.Lb({imports:[[u.c,t.h,t.p,N,F.a]]}),r})()}}]);